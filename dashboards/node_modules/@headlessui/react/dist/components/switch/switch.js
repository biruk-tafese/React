"use client";import{useFocusRing as j}from"@react-aria/focus";import{useHover as V}from"@react-aria/interactions";import l,{Fragment as $,createContext as q,useCallback as z,useContext as Q,useMemo as C,useRef as Y,useState as L}from"react";import{useActivePress as Z}from'../../hooks/use-active-press.js';import{useControllable as ee}from'../../hooks/use-controllable.js';import{useDisposables as te}from'../../hooks/use-disposables.js';import{useEvent as m}from'../../hooks/use-event.js';import{useId as oe}from'../../hooks/use-id.js';import{useResolveButtonType as re}from'../../hooks/use-resolve-button-type.js';import{useSyncRefs as ne}from'../../hooks/use-sync-refs.js';import{useDisabled as le}from'../../internal/disabled.js';import{FormFields as ie}from'../../internal/form-fields.js';import{useProvidedId as ae}from'../../internal/id.js';import{isDisabledReactIssue7711 as se}from'../../utils/bugs.js';import{attemptSubmit as pe}from'../../utils/form.js';import{forwardRefWithAs as ce,mergeProps as ue,render as x}from'../../utils/render.js';import{Description as me,useDescribedBy as de,useDescriptions as fe}from'../description/description.js';import{Keys as G}from'../keyboard.js';import{Label as he,useLabelledBy as Te,useLabels as be}from'../label/label.js';let b=q(null);b.displayName="GroupContext";let ye=$;function Se(o){var i;let[r,s]=L(null),[d,f]=be(),[h,t]=fe(),p=C(()=>({switch:r,setSwitch:s}),[r,s]),c={},T=o;return l.createElement(t,{name:"Switch.Description",value:h},l.createElement(f,{name:"Switch.Label",value:d,props:{htmlFor:(i=p.switch)==null?void 0:i.id,onClick(u){r&&(u.currentTarget instanceof HTMLLabelElement&&u.preventDefault(),r.click(),r.focus({preventScroll:!0}))}}},l.createElement(b.Provider,{value:p},x({ourProps:c,theirProps:T,slot:{},defaultTag:ye,name:"Switch.Group"}))))}let we="button";function _e(o,r){var v;let s=oe(),d=ae(),f=le(),{id:h=d||`headlessui-switch-${s}`,disabled:t=f||!1,checked:p,defaultChecked:c=!1,onChange:T,name:i,value:u,form:F,...R}=o,y=Q(b),S=Y(null),A=ne(S,r,y===null?null:y.setSwitch),[a,n]=ee(p,T,c),k=te(),[w,_]=L(!1),P=m(()=>{_(!0),n==null||n(!a),k.nextFrame(()=>{_(!1)})}),H=m(e=>{if(se(e.currentTarget))return e.preventDefault();e.preventDefault(),P()}),M=m(e=>{e.key===G.Space?(e.preventDefault(),P()):e.key===G.Enter&&pe(e.currentTarget)}),U=m(e=>e.preventDefault()),B=Te(),I=de(),{isFocusVisible:E,focusProps:K}=j({autoFocus:(v=o.autoFocus)!=null?v:!1}),{isHovered:g,hoverProps:W}=V({isDisabled:t!=null?t:!1}),{pressed:D,pressProps:O}=Z({disabled:t!=null?t:!1}),N=C(()=>{var e;return{checked:a,disabled:t,hover:g,focus:E,active:D,autofocus:(e=o.autoFocus)!=null?e:!1,changing:w}},[a,g,E,D,t,w,o.autoFocus]),J=ue({id:h,ref:A,role:"switch",type:re(o,S),tabIndex:0,"aria-checked":a,"aria-labelledby":B,"aria-describedby":I,disabled:t,onClick:H,onKeyUp:M,onKeyPress:U},K,W,O),X=z(()=>n==null?void 0:n(c),[n]);return l.createElement(l.Fragment,null,i!=null&&l.createElement(ie,{data:a?{[i]:u||"on"}:{},form:F,onReset:X}),x({ourProps:J,theirProps:R,slot:N,defaultTag:we,name:"Switch"}))}let Pe=ce(_e),Ee=Se,ge=he,De=me,Xe=Object.assign(Pe,{Group:Ee,Label:ge,Description:De});export{Xe as Switch,De as SwitchDescription,Ee as SwitchGroup,ge as SwitchLabel};
