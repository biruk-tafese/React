import{Fragment as b,cloneElement as N,createElement as x,forwardRef as E,isValidElement as j,useCallback as S,useRef as v}from"react";import{classNames as h}from'./class-names.js';import{match as w}from'./match.js';var k=(a=>(a[a.None=0]="None",a[a.RenderStrategy=1]="RenderStrategy",a[a.Static=2]="Static",a))(k||{}),O=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(O||{});function _({ourProps:r,theirProps:n,slot:e,defaultTag:a,features:s,visible:t=!0,name:l,mergeRefs:i}){i=i!=null?i:M;let o=P(n,r);if(t)return g(o,e,a,l,i);let y=s!=null?s:0;if(y&2){let{static:f=!1,...d}=o;if(f)return g(d,e,a,l,i)}if(y&1){let{unmount:f=!0,...d}=o;return w(f?0:1,{[0](){return null},[1](){return g({...d,hidden:!0,style:{display:"none"}},e,a,l,i)}})}return g(o,e,a,l,i)}function g(r,n={},e,a,s){let{as:t=e,children:l,refName:i="ref",...o}=R(r,["unmount","static"]),y=r.ref!==void 0?{[i]:r.ref}:{},f=typeof l=="function"?l(n):l;"className"in o&&o.className&&typeof o.className=="function"&&(o.className=o.className(n)),o["aria-labelledby"]&&o["aria-labelledby"]===o.id&&(o["aria-labelledby"]=void 0);let d={};if(n){let u=!1,p=[];for(let[c,T]of Object.entries(n))typeof T=="boolean"&&(u=!0),T===!0&&p.push(c.replace(/([A-Z])/g,F=>`-${F.toLowerCase()}`));if(u){d["data-headlessui-state"]=p.join(" ");for(let c of p)d[`data-${c}`]=""}}if(t===b&&(Object.keys(m(o)).length>0||Object.keys(m(d)).length>0))if(!j(f)||Array.isArray(f)&&f.length>1){if(Object.keys(m(o)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${a} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m(o)).concat(Object.keys(m(d))).map(u=>`  - ${u}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}else{let u=f.props,p=u==null?void 0:u.className,c=typeof p=="function"?(...F)=>h(p(...F),o.className):h(p,o.className),T=c?{className:c}:{};return N(f,Object.assign({},P(f.props,m(R(o,["ref"]))),d,y,{ref:s(f.ref,y.ref)},T))}return x(t,Object.assign({},R(o,["ref"]),t!==b&&y,t!==b&&d),f)}function H(){let r=v([]),n=S(e=>{for(let a of r.current)a!=null&&(typeof a=="function"?a(e):a.current=e)},[]);return(...e)=>{if(!e.every(a=>a==null))return r.current=e,n}}function M(...r){return r.every(n=>n==null)?void 0:n=>{for(let e of r)e!=null&&(typeof e=="function"?e(n):e.current=n)}}function P(...r){var a;if(r.length===0)return{};if(r.length===1)return r[0];let n={},e={};for(let s of r)for(let t in s)t.startsWith("on")&&typeof s[t]=="function"?((a=e[t])!=null||(e[t]=[]),e[t].push(s[t])):n[t]=s[t];if(n.disabled||n["aria-disabled"])for(let s in e)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(e[s]=[t=>{var l;return(l=t==null?void 0:t.preventDefault)==null?void 0:l.call(t)}]);for(let s in e)Object.assign(n,{[s](t,...l){let i=e[s];for(let o of i){if((t instanceof Event||(t==null?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;o(t,...l)}}});return n}function U(...r){var a;if(r.length===0)return{};if(r.length===1)return r[0];let n={},e={};for(let s of r)for(let t in s)t.startsWith("on")&&typeof s[t]=="function"?((a=e[t])!=null||(e[t]=[]),e[t].push(s[t])):n[t]=s[t];for(let s in e)Object.assign(n,{[s](...t){let l=e[s];for(let i of l)i==null||i(...t)}});return n}function D(r){var n;return Object.assign(E(r),{displayName:(n=r.displayName)!=null?n:r.name})}function m(r){let n=Object.assign({},r);for(let e in n)n[e]===void 0&&delete n[e];return n}function R(r,n=[]){let e=Object.assign({},r);for(let a of n)a in e&&delete e[a];return e}export{k as RenderFeatures,O as RenderStrategy,m as compact,D as forwardRefWithAs,U as mergeProps,_ as render,H as useMergeRefsFn};
